generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId

  name          String
  email         String   @unique
  passwordHash  String

  document      String?
  phone         String?
  birthDate     DateTime?

  active        Boolean  @default(true)
  lastLoginAt   DateTime?

  companyId     String?  @db.ObjectId
  roleIds       String[] @db.ObjectId

  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model Role {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  name           String   @unique
  description    String?
  permissionKeys String[]
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model Node {
  id        String   @id @map("_id") // Usando String normal para ID personalizado (ex: "headquarters") ou @db.ObjectId se preferir auto
  label     String
  type      String   @default("default") // 'input', 'output', 'default', 'parent'
  x         Float    @default(0)
  y         Float    @default(0)
  parentId  String?  // Opcional: Para aninhamento visual
  
  status    String   @default("active") // active, inactive, alert
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
